@page
@model LibraryLove.Pages.Customer.PersonalBookModel
@{
    ViewData["Title"] = "My Personal Books";
}

@if ((Model.LoanedBooks.Count != 0 && Model.PreLoanedBooks.Count != 0) || Model.BookRecord.Genre != null)
{
    <form method="get">
        <div class="form-group d-md-flex">
            <label class="lead mr-md-2">View By</label>
            <div>
                <select onchange="this.form.submit()"
                        asp-for="BookRecord.Genre"
                        asp-items="@Html.GetEnumSelectList<LibraryLove.Model.BookGenre>()"
                        class="custom-select mr-sm-2 genre-select">
                    <option value="">All</option>
                </select>
            </div>
            <i class="fas fa-info-circle fa-lg mt-3 view-info-circle"
               data-toggle="tooltip"
               data-placement="right"
               title="Click on a Book to view more details and actions"></i>
        </div>
    </form>

}


@if (Model.LoanedBooks.Count != 0)
{

    <p class="lead">Loaned Books:</p>
    <div class="row">
        @foreach (var item in Model.LoanedBooks)
        {
            <div class="col-lg-4 col-md-6  my-3">
                <div class="card text-center">
                    <div class="card-header">
                        <h4 class="book-details book-details">@item.Title</h4>
                    </div>
                    <div class="card-body">
                        <img src="~/Images/@item.Image">
                        <a asp-page="Book" asp-route-id="@item.Id" class="stretched-link"></a>
                    </div>
                    <div class="card-footer">
                        <p class="lead book-details">@item.GetFullName()</p>
                    </div>
                </div>
            </div>
        }
    </div>
}




@if (Model.PreLoanedBooks.Count != 0)
{

    <p class="lead">Pre Loaned Books:</p>
    <div class="row">
        @foreach (var item in Model.PreLoanedBooks)
        {
            <div class="col-lg-4 col-md-6  my-3">
                <div class="card text-center">
                    <div class="card-header">
                        <h4 class="book-details book-details">@item.Title</h4>
                    </div>
                    <div class="card-body">
                        <img src="~/Images/@item.Image">
                        <a asp-page="Book" asp-route-id="@item.Id" class="stretched-link"></a>
                    </div>
                    <div class="card-footer">
                        <p class="lead book-details">@item.GetFullName()</p>
                    </div>
                </div>
            </div>
        }
    </div>
}

@if (Model.LoanedBooks.Count == 0 && Model.PreLoanedBooks.Count == 0)
{
    @if (Model.BookRecord.Genre != null)
    {
        <p class="lead">You have no books under this Genre</p>
    }
    else
    {
        <p class="lead">You have no books</p>
    }
}




@section Scripts{
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
}
